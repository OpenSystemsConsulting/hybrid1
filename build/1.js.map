{"version":3,"sources":["../../src/pages/gps/gps.module.ts","../../src/pipes/pipes.module.ts","../../src/pipes/change-display-from/change-display-from.ts","../../src/pipes/change-display-to/change-display-to.ts","../../src/pipes/change-display-svc/change-display-svc.ts","../../src/pipes/gpsdate/gpsdate.ts","../../src/pipes/keys/keys.ts","../../src/pages/gps/gps.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACO;AAChB;AACqB;AAcrD;IAAA;IAA4B,CAAC;IAAhB,aAAa;QAZzB,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,qDAAO;aACR;YACD,OAAO,EAAE;gBACP,wEAAW;gBACX,sEAAe,CAAC,QAAQ,CAAC,qDAAO,CAAC;aAClC;YACD,OAAO,EAAE;gBACP,qDAAO;aACV;SACA,CAAC;OACW,aAAa,CAAG;IAAD,oBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;ACjBe;AACyC;AACN;AACG;AAC/B;AACT;AAcvC;IAAA;IAA2B,CAAC;IAAf,WAAW;QAbvB,+DAAQ,CAAC;YACN,YAAY,EAAE,CAAC,uGAAqB;gBAChC,iGAAmB;gBACnB,oGAAoB;gBACpB,qEAAW;gBACX,4DAAQ,CAAC;YACb,OAAO,EAAE,EAAE;YACX,OAAO,EAAE,CAAC,uGAAqB;gBAC3B,iGAAmB;gBACnB,oGAAoB;gBACpB,qEAAW;gBACX,4DAAQ,CAAC;SAChB,CAAC;OACW,WAAW,CAAI;IAAD,kBAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;ACnB4B;AAEpD;;;;GAIG;AAIH;IAAA;IASA,CAAC;IARC;;OAEG;IACH,yCAAS,GAAT,UAAU,KAAU,EAAE,GAAQ;QAC5B,EAAE,CAAC,CAAC,GAAG,CAAC,WAAW,CAAC;YAClB,MAAM,CAAC,GAAG,CAAC,WAAW,CAAC;QACzB,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IARU,qBAAqB;QAHjC,2DAAI,CAAC;YACJ,IAAI,EAAE,mBAAmB;SAC1B,CAAC;OACW,qBAAqB,CASjC;IAAD,4BAAC;CAAA;AATiC;;;;;;;;;;;;;;;;;ACVkB;AAEpD;;;;GAIG;AAIH;IAAA;IASA,CAAC;IARC;;OAEG;IACH,uCAAS,GAAT,UAAU,KAAU,EAAE,GAAQ;QAC5B,EAAE,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC;YAChB,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC;QACvB,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IARU,mBAAmB;QAH/B,2DAAI,CAAC;YACJ,IAAI,EAAE,iBAAiB;SACxB,CAAC;OACW,mBAAmB,CAS/B;IAAD,0BAAC;CAAA;AAT+B;;;;;;;;;;;;;;;;;ACVoB;AAEpD;;;;GAIG;AAIH;IAAA;IAUA,CAAC;IATC;;OAEG;IACH,wCAAS,GAAT,UAAU,KAAU,EAAE,SAAc;QAClC,IAAI,MAAM,GAAG,GAAG,GAAG,KAAK,CAAC,IAAI,EAAE,GAAG,GAAG,CAAC;QACtC,EAAE,CAAC,CAAC,SAAS,CAAC,SAAS,EAAE,KAAK,MAAM,CAAC;YACnC,MAAM,CAAC,EAAE,CAAC;QACZ,MAAM,CAAC,MAAM,CAAC;IAChB,CAAC;IATU,oBAAoB;QAHhC,2DAAI,CAAC;YACJ,IAAI,EAAE,kBAAkB;SACzB,CAAC;OACW,oBAAoB,CAUhC;IAAD,2BAAC;CAAA;AAVgC;;;;;;;;;;;;;;;;;ACVmB;AAEpD;;;;GAIG;AAIH;IAAA;IAeA,CAAC;IAdC;;OAEG;IACH,+BAAS,GAAT,UAAU,OAAY,EAAE,IAAc;QACpC,OAAO,GAAG,OAAO,IAAI,EAAE,CAAC;QAExB,IAAI,KAAK,GAAQ,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC;QACnC,uCAAuC;QACvC,mCAAmC;QAEnC,gCAAgC;QAChC,sCAAsC;QACtC,MAAM,CAAC,KAAK,CAAC,kBAAkB,EAAE,CAAC;IACpC,CAAC;IAdU,WAAW;QAHvB,2DAAI,CAAC;YACJ,IAAI,EAAE,SAAS;SAChB,CAAC;OACW,WAAW,CAevB;IAAD,kBAAC;CAAA;AAfuB;;;;;;;;;;;;;;;;;ACV4B;AAEpD;;;;GAIG;AAIH;IAAA;IAWA,CAAC;IAVC;;OAEG;IACH,4BAAS,GAAT,UAAU,KAAS,EAAE,IAAa;QAChC,IAAI,IAAI,GAAS,EAAE,CAAC;QACpB,GAAG,CAAC,CAAC,IAAI,GAAG,IAAI,KAAK,CAAC,CAAC,CAAC;YACpB,IAAI,CAAC,IAAI,CAAC,EAAC,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,CAAC,GAAG,CAAC,EAAC,CAAC,CAAC;QAC7C,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAVU,QAAQ;QAHpB,2DAAI,CAAC;YACJ,IAAI,EAAE,MAAM;SACb,CAAC;OACW,QAAQ,CAWpB;IAAD,eAAC;CAAA;AAXoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVqB;AACe;AACD;AAEH;AAEiC;AACS;AACD;AACjB;AACS;AACG;AACZ;AA4B7E;IAkCE,iBAAmB,OAAsB,EAAS,SAAoB,EAC5D,SAAmC,EAAU,aAAoC,EACjF,QAAiC,EAAU,WAAwB,EAAU,MAA0B,EACvG,cAAsC,EAAU,UAA8B,EAC9E,aAAoC;QAJ9C,iBASC;QATkB,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAC5D,cAAS,GAAT,SAAS,CAA0B;QAAU,kBAAa,GAAb,aAAa,CAAuB;QACjF,aAAQ,GAAR,QAAQ,CAAyB;QAAU,gBAAW,GAAX,WAAW,CAAa;QAAU,WAAM,GAAN,MAAM,CAAoB;QACvG,mBAAc,GAAd,cAAc,CAAwB;QAAU,eAAU,GAAV,UAAU,CAAoB;QAC9E,kBAAa,GAAb,aAAa,CAAuB;QApC9C,gBAAW,GAAY,KAAK,CAAC;QAC7B,eAAU,GAAG;YACX,OAAO,EAAE,KAAK;YACd,kBAAkB,EAAE,KAAK;SAC1B,CAAC;QAIF,iBAAY,GAAG,KAAK,CAAC;QAIrB,cAAS,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,EAAE,CAAC;QAI3C,aAAQ,GAAgB;YACtB,MAAM,EAAE;gBACN,QAAQ,EAAE,CAAC;gBACX,SAAS,EAAE,CAAC;gBACZ,QAAQ,EAAE,CAAC;gBACX,QAAQ,EAAE,GAAG;gBACb,gBAAgB,EAAE,GAAG;gBACrB,OAAO,EAAE,EAAE;gBACX,KAAK,EAAE,GAAG;aACX;YACD,SAAS,EAAE,EAAE;SACd,CAAC;QAEF,cAAS,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,EAAE,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,EAAE,EAAE,EAAE,SAAS,EAAE,CAAC;QACtG,QAAG,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAmD9C,oBAAe,GAAG;YAChB,MAAM,CAAC,KAAI,CAAC,YAAY,CAAC;QAC3B,CAAC;QAED,eAAU,GAAG;YACX,MAAM,CAAC,KAAI,CAAC,KAAK,IAAI,EAAE,CAAC;QAC1B,CAAC;QAlDC,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,IAAI,CAAC;QAC/B,oCAAoC;QACpC,mEAAc,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QACrD,mEAAc,CAAC,aAAa,CAAC,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;IAC/D,CAAC;IAED,kCAAgB,GAAhB;QAAA,iBAoCC;QAlCC,sCAAsC;QACtC,IAAI,CAAC,aAAa,CAAC,GAAG,GAAG,KAAK,CAAC;QAC/B,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAEjC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC;QAC7C,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;QAChB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC;QACtC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC;QAE7C,qDAAqD;QACrD,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;YACjE,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC;YACzD,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,GAAG,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC;YAC3D,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC;YACzD,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC;YACzD,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,gBAAgB,GAAG,QAAQ,CAAC,MAAM,CAAC,gBAAgB,CAAC;YACzE,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,GAAG,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC;YACvD,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,GAAG,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC;YACnD,KAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;YAC7C,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,KAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YAEzB,KAAI,CAAC,SAAS,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;YAC9C,KAAI,CAAC,SAAS,GAAG,KAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;QAE7C,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,GAAG;YACX,KAAI,CAAC,OAAO,GAAG,MAAM,CAAC;YACtB,KAAI,CAAC,YAAY,GAAG,KAAK,CAAC;YAC1B,KAAI,CAAC,YAAY,GAAG,GAAG,CAAC,OAAO,CAAC;YAChC,wBAAwB;YACxB,kCAAkC;YAClC,KAAI,CAAC,KAAK,GAAG,KAAI,CAAC,UAAU,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;QACjD,CAAC,CAAC,CAAC;IAEL,CAAC;IAjFU,OAAO;QAJnB,gEAAS,CAAC;YACT,QAAQ,EAAE,UAAU;WACG;SACxB,CAAC;qOAmC6D,CAAS;YACjD,gHAAwB,+EAAyB,iGAAqB;YACvE,2GAAuB,+FAAoD,CAAkB;YACvF,wGAAsB,CAAwC;YAC/D,IAAqB;OAtCnC,OAAO,CA2FnB;IAAD,CAAC;AAAA;SA3FY,OAAO,e","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { GpsPage } from './gps';\r\nimport {PipesModule} from '../../pipes/pipes.module';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    GpsPage\r\n  ],\r\n  imports: [\r\n    PipesModule,\r\n    IonicPageModule.forChild(GpsPage),\r\n  ],\r\n  exports: [\r\n    GpsPage\r\n]\r\n})\r\nexport class GpsPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/gps/gps.module.ts","import { NgModule } from '@angular/core';\nimport { ChangeDisplayFromPipe } from './change-display-from/change-display-from';\nimport { ChangeDisplayToPipe } from './change-display-to/change-display-to';\nimport { ChangeDisplaySvcPipe } from './change-display-svc/change-display-svc';\nimport { GpsdatePipe } from './gpsdate/gpsdate';\nimport { KeysPipe } from './keys/keys';\n@NgModule({\n    declarations: [ChangeDisplayFromPipe,\n        ChangeDisplayToPipe,\n        ChangeDisplaySvcPipe,\n        GpsdatePipe,\n        KeysPipe],\n    imports: [],\n    exports: [ChangeDisplayFromPipe,\n        ChangeDisplayToPipe,\n        ChangeDisplaySvcPipe,\n        GpsdatePipe,\n        KeysPipe]\n})\nexport class PipesModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/pipes.module.ts","import { Pipe, PipeTransform } from '@angular/core';\n\n/**\n * Generated class for the ChangeDisplayFromPipe pipe.\n *\n * See https://angular.io/api/core/Pipe for more info on Angular Pipes.\n */\n@Pipe({\n  name: 'changeDisplayFrom',\n})\nexport class ChangeDisplayFromPipe implements PipeTransform {\n  /**\n   * Takes a value and makes it lowercase.\n   */\n  transform(input: any, job: any): any {\n    if (job.displayFrom)\n      return job.displayFrom;\n    return input;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/change-display-from/change-display-from.ts","import { Pipe, PipeTransform } from '@angular/core';\n\n/**\n * Generated class for the ChangeDisplayToPipe pipe.\n *\n * See https://angular.io/api/core/Pipe for more info on Angular Pipes.\n */\n@Pipe({\n  name: 'changeDisplayTo',\n})\nexport class ChangeDisplayToPipe implements PipeTransform {\n  /**\n   * Takes a value and makes it lowercase.\n   */\n  transform(input: any, job: any): any {\n    if (job.displayTo)\n      return job.displayTo;\n    return input;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/change-display-to/change-display-to.ts","import { Pipe, PipeTransform } from '@angular/core';\n\n/**\n * Generated class for the ChangeDisplaySvcPipe pipe.\n *\n * See https://angular.io/api/core/Pipe for more info on Angular Pipes.\n */\n@Pipe({\n  name: 'changeDisplaySvc',\n})\nexport class ChangeDisplaySvcPipe implements PipeTransform {\n  /**\n   * Takes a value and makes it lowercase.\n   */\n  transform(input: any, pdaParams: any): any {\n    var output = \"(\" + input.trim() + \")\";\n    if (pdaParams.getSiteId() === 'WADS')\n      return \"\";\n    return output;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/change-display-svc/change-display-svc.ts","import { Pipe, PipeTransform } from '@angular/core';\n\n/**\n * Generated class for the GpsdatePipe pipe.\n *\n * See https://angular.io/api/core/Pipe for more info on Angular Pipes.\n */\n@Pipe({\n  name: 'gpsdate',\n})\nexport class GpsdatePipe implements PipeTransform {\n  /**\n   * Takes a value and makes it lowercase.\n   */\n  transform(gpsdate: any, args: string[]): any {\n    gpsdate = gpsdate || '';\n\n    var ldate: any = new Date(gpsdate);\n    //var oset = ldate.getTimezoneOffset();\n    //ldate -= (oset * -1) * 60 * 1000;\n\n    //var newdate = new Date(ldate);\n    //return newdate.toLocaleTimeString();\n    return ldate.toLocaleTimeString();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/gpsdate/gpsdate.ts","import { Pipe, PipeTransform } from '@angular/core';\n\n/**\n * Generated class for the KeysPipe pipe.\n *\n * See https://angular.io/api/core/Pipe for more info on Angular Pipes.\n */\n@Pipe({\n  name: 'keys',\n})\nexport class KeysPipe implements PipeTransform {\n  /**\n   * Takes a value and makes it lowercase.\n   */\n  transform(value:any, args:string[]): any {\n    let keys:any[] = [];\n    for (let key in value) {\n        keys.push({key: key, value: value[key]});\n    }\n    return keys;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/keys/keys.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\nimport { Geolocation } from '@ionic-native/geolocation';\r\n\r\nimport { LoopBackConfig } from '../../../shared/sdk';\r\n\r\nimport { ConfigServiceProvider } from '../../providers/config-service/config-service';\r\nimport { PdaparamsServiceProvider } from '../../providers/pdaparams-service/pdaparams-service';\r\nimport { GpsAuditServiceProvider } from '../../providers/gps-audit-service/gps-audit-service';\r\nimport { GpsServiceProvider } from '../../providers/gps-service/gps-service';\r\nimport { SharedServiceProvider } from '../../providers/shared-service/shared-service';\r\nimport { MessageServiceProvider } from '../../providers/message-service/message-service';\r\nimport { LogServiceProvider } from '../../providers/log-service/log-service';\r\n\r\n/**\r\n * Generated class for the GpsPage page.\r\n *\r\n * See http://ionicframework.com/docs/components/#navigation for more info\r\n * on Ionic pages and navigation.\r\n */\r\ninterface Coordinates {\r\n  latitude: number;\r\n  longitude: number;\r\n  accuracy: number;\r\n  altitude: number;\r\n  altitudeAccuracy: number;\r\n  heading: number;\r\n  speed: number;\r\n}\r\n\r\ninterface Geoposition {\r\n  coords: Coordinates;\r\n  timestamp: number;\r\n}\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-gps',\r\n  templateUrl: 'gps.html',\r\n})\r\nexport class GpsPage {\r\n  username: any;\r\n  psIsWorking: boolean = false;\r\n  posOptions = {\r\n    timeout: 10000,\r\n    enableHighAccuracy: false\r\n  };\r\n  error;\r\n  debug;\r\n  gpshistory;\r\n  gpsIsWorking = false;\r\n  gpsErrorMess;\r\n  err;\r\n  driverId: number;\r\n  loginFlag = this.pdaParams.isDrvLoggedOn();\r\n  newMessageCount: number;\r\n  timestamp;\r\n\r\n  position: Geoposition = {\r\n    coords: {\r\n      latitude: 0,\r\n      longitude: 0,\r\n      accuracy: 0,\r\n      altitude: 100,\r\n      altitudeAccuracy: 100,\r\n      heading: 50,\r\n      speed: 100,\r\n    },\r\n    timestamp: 10\r\n  };\r\n  success;\r\n  logParams = { site: this.pdaParams.getSiteId(), driver: this.pdaParams.getDriverId(), fn: 'GPSPage' };\r\n  log = this.logger.getInstance(this.logParams);\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams,\r\n    private pdaParams: PdaparamsServiceProvider, private configService: ConfigServiceProvider,\r\n    private gpsAudit: GpsAuditServiceProvider, private geolocation: Geolocation, private logger: LogServiceProvider,\r\n    private messageService: MessageServiceProvider, private gpsService: GpsServiceProvider,\r\n    private sharedService: SharedServiceProvider) {\r\n    this.username = navParams.data;\r\n    //console.log(\"GpsPage loading...\");\r\n    LoopBackConfig.setBaseURL(this.configService.apiURL);\r\n    LoopBackConfig.setApiVersion(this.configService.API_VERSION);\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n\r\n    //set the tab string in shared-service\r\n    this.sharedService.tab = \"GPS\";\r\n    this.log.info(\"In the GPS Tab.\");\r\n\r\n    this.driverId = this.pdaParams.getDriverId();\r\n    this.error = \"\";\r\n    this.debug = this.pdaParams.debugMode;\r\n    this.gpshistory = this.gpsAudit.getHistory();\r\n\r\n    //Riyaz: Using ionic native's geolocation plugin here\r\n    this.geolocation.getCurrentPosition(this.posOptions).then((position) => {\r\n      this.position.coords.latitude = position.coords.latitude;\r\n      this.position.coords.longitude = position.coords.longitude;\r\n      this.position.coords.altitude = position.coords.altitude;\r\n      this.position.coords.accuracy = position.coords.accuracy;\r\n      this.position.coords.altitudeAccuracy = position.coords.altitudeAccuracy;\r\n      this.position.coords.heading = position.coords.heading;\r\n      this.position.coords.speed = position.coords.speed;\r\n      this.position.timestamp = position.timestamp;\r\n      this.success = 'YES';\r\n      this.gpsIsWorking = true;\r\n\r\n      this.timestamp = new Date(position.timestamp);\r\n      this.timestamp = this.timestamp.toString();\r\n\r\n    }).catch((err) => {\r\n      this.success = 'FAIL';\r\n      this.gpsIsWorking = false;\r\n      this.gpsErrorMess = err.message;\r\n      //this.error = \"Failed\";\r\n      //this.err =  JSON.stringify(err);\r\n      this.error = this.gpsService.getGPSErrors(err);\r\n    });\r\n\r\n  }\r\n\r\n  getGPSIsworking = () => {\r\n    return this.gpsIsWorking;\r\n  }\r\n\r\n  showResult = () => {\r\n    return this.error == \"\";\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/gps/gps.ts"],"sourceRoot":""}