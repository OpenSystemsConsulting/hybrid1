{"version":3,"sources":["../../src/pages/barcode/barcode.module.ts","../../src/pages/barcode/barcode.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { BarcodePage } from './barcode';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    BarcodePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(BarcodePage)\r\n  ],\r\n  \r\n    exports: [\r\n        BarcodePage\r\n    ]\r\n})\r\nexport class BarcodePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/barcode/barcode.module.ts","import { Component, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, AlertController, Tabs, ModalController } from 'ionic-angular';\r\nimport { Device } from '@ionic-native/device';\r\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner';\r\n\r\nimport { LoopBackConfig } from '../../../shared/sdk';\r\ndeclare const lbclient: any;\r\n\r\nimport { ConfigServiceProvider } from '../../providers/config-service/config-service';\r\nimport { LogServiceProvider } from '../../providers/log-service/log-service';\r\nimport { PdaparamsServiceProvider } from '../../providers/pdaparams-service/pdaparams-service';\r\nimport { SiteconfigServiceProvider } from '../../providers/siteconfig-service/siteconfig-service';\r\nimport { BaseServiceProvider } from '../../providers/base-service/base-service';\r\nimport { PlatformReadyServiceProvider } from '../../providers/platform-ready-service/platform-ready-service';\r\nimport { SharedServiceProvider } from '../../providers/shared-service/shared-service';\r\nimport { MessageServiceProvider } from '../../providers/message-service/message-service';\r\nimport { BarcodeReplicationServiceProvider } from '../../providers/barcode-replication-service/barcode-replication-service';\r\n\r\ndeclare var cordova: any;\t\t\t\t// for pm80scanner plugin\r\n\r\n\r\n\r\n/**\r\n * Generated class for the BarcodePage page.\r\n *\r\n * See http://ionicframework.com/docs/components/#navigation for more info\r\n * on Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-barcode',\r\n  templateUrl: 'barcode.html',\r\n})\r\nexport class BarcodePage {\r\n  username: any;\r\n  t: Tabs = this.navCtrl.parent;\r\n  logParams = { site: this.pdaParams.getSiteId(), driver: this.pdaParams.getDriverId(), fn: 'BarcodePage' };\r\n  log = this.logger.getInstance(this.logParams);\r\n  saveok = false;\r\n  bcode;\r\n  useCamera = true;\r\n  useCipherlab = false;\r\n  usePM80 = false;\r\n  myBcodeIsjobNum = false;\r\n  my_scan_session_type;\r\n  my_is_scan_on = true;\r\n  matchedJobsPieces = 0;\r\n  LocalBarcodeHist = lbclient.models.LocalBarcodeHist;\r\n  RemoteBarcodeHist = lbclient.models.RemoteBarcodeHist;\r\n  Job = lbclient.models.LocalJob;\r\n  //RemoteJob = lbclient.models.Job;\r\n  newMessageCount: number;\r\n  //barcode_sync = lbclient.barcode_sync;\r\n  YN;\r\n  pda_barcodes;\r\n  jobsPieces;\r\n  barcodes = [];\r\n  barcodetemp = \"\";\r\n  //barcodes = ['011804230301XX01'];\r\n  scan_session_id;\r\n  driverId: number;\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams, private configService: ConfigServiceProvider,\r\n    private pdaParams: PdaparamsServiceProvider, private siteConfig: SiteconfigServiceProvider,\r\n    private logger: LogServiceProvider, private base: BaseServiceProvider, private alertCtrl: AlertController,\r\n    private platformReady: PlatformReadyServiceProvider, private device: Device,\r\n    private barcodeScanner: BarcodeScanner, public modalController: ModalController,\r\n    private sharedService: SharedServiceProvider, private messageService: MessageServiceProvider,\r\n\t\tprivate cd: ChangeDetectorRef,\r\n    private barcodeReplicationService: BarcodeReplicationServiceProvider) {\r\n    //console.log(\"BarcodePage loading...\");\r\n    this.username = navParams.data;\r\n    LoopBackConfig.setBaseURL(this.configService.apiURL);\r\n    LoopBackConfig.setApiVersion(this.configService.API_VERSION);\r\n\r\n\r\n    /* this.sharedService.messageToDriver.subscribe(payload => {\r\n      // this.newMessageCount = this.messageService.getNewMesssageCount(); \r\n    }); */\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n\r\n    // initialise the current new message count in this scope\r\n    // this.newMessageCount = this.messageService.getNewMesssageCount(); \r\n\r\n    if (this.sharedService.testing) {\r\n      this.YN = 'Y';\r\n      this.pda_barcodes = 'Y';\r\n    }\r\n    else {\r\n      this.pda_barcodes = this.siteConfig.getSiteConfigYN('PDA_BARCODES');\r\n      this.YN = this.siteConfig.getSiteConfigYN('BARCODE_SUPP_BCODEISJOBNUM');\r\n    }\r\n\r\n    this.driverId = this.pdaParams.getDriverId();\r\n    if (this.pda_barcodes != 'Y') {\r\n      let alert = this.alertCtrl.create({\r\n        title: 'Module not installed',\r\n        subTitle: 'This module is not installed.',\r\n        buttons: [{\r\n          text: 'OK',\r\n          handler: () => {\r\n            const navTransition = alert.dismiss();\r\n            navTransition.then(() => {\r\n              this.t.select(0);\r\n            });\r\n            return false;\r\n          }\r\n        }],\r\n        enableBackdropDismiss: false\r\n      });\r\n      alert.present();\r\n    } else {\r\n      //Check if the user is logged in\r\n      if (this.pdaParams.isDrvLoggedOn() == false) {\r\n        let logAlert = this.alertCtrl.create({\r\n          title: 'ERROR',\r\n          subTitle: 'You are not logged in please do so first from the jobs screen',\r\n          buttons: [{\r\n            text: 'OK',\r\n            handler: () => {\r\n              const navTransition = logAlert.dismiss();\r\n              navTransition.then(() => {\r\n                this.t.select(0);\r\n              });\r\n              return false;\r\n            }\r\n          }],\r\n          enableBackdropDismiss: false\r\n        });\r\n        logAlert.present();\r\n      }\r\n\r\n\t\t\t// make sure no barcodes from arbitary scans using a scanning device\r\n\t\t\t// e.g. cipherlab, pm80 etc. as operator can use button and scan at any time\r\n\t\t\t// from any page and the array then gets presented here\r\n\t\t\tthis.barcodes = [];\r\n\r\n      //Check the value of 'BARCODE_SUPP_BCODEISJOBNUM'\r\n      if (this.YN === \"Y\") {\r\n        this.myBcodeIsjobNum = true;\r\n      }\r\n      else {\r\n        this.myBcodeIsjobNum = false;\r\n      }\r\n      this.jobsPieces = this.matchedJobsPieces;\r\n\r\n      //Determine Scan Type   \r\n      let scanPrompt = this.alertCtrl.create({\r\n        title: 'Determine SCAN Type',\r\n        message: 'Please choose what SCAN type you are performing',\r\n        buttons: [\r\n          {\r\n            text: 'Scan On',\r\n            handler: () => {\r\n              this.log.debug(\"Choosing Scan type: Chose SCAN ON !!!\");\r\n              this.my_scan_session_type = 'SCAN ON SESSION';\r\n              this.scan_session_id = this.my_scan_session_type;\r\n              this.my_is_scan_on = true;\r\n\r\n            }\r\n          },\r\n          {\r\n            text: 'Scan Off',\r\n            handler: () => {\r\n              this.log.debug(\"Choosing Scan type: Chose SCAN OFF !!!\");\r\n              this.my_scan_session_type = 'SCAN OFF SESSION';\r\n              this.scan_session_id = this.my_scan_session_type;\r\n              this.my_is_scan_on = false;\r\n\r\n            }\r\n          }\r\n        ],\r\n        enableBackdropDismiss: false\r\n      });\r\n      scanPrompt.present();\r\n\r\n      //Check Device for a CipherLab RS30\r\n      if (this.platformReady.isPlatformReady()) {\r\n        var model = this.device.model;\r\n        this.log.debug(\"Device Model = \" + model);\r\n        if (model == 'CipherLab RS30') {\r\n          this.log.debug(\"Device is a CipherLab RS30 \" + model);\r\n          this.useCamera = false;\r\n          this.useCipherlab = true;\r\n        }\r\n        else\r\n\t\t\t\tif (model == 'PM80') {\r\n          this.log.debug(\"Device is a PM80 \" + model);\r\n          this.useCamera = false;\r\n          this.usePM80 = true;\r\n        }\r\n        else {\r\n          this.log.debug(\"Device is NOT !!!! a CipherLab RS30 HEAD scanning NOT Available \" + model);\r\n          this.useCamera = true;\r\n        }\r\n        if (this.useCipherlab) {\r\n          (<any>window).plugins.CipherlabRS30CordovaPlugin.initialise(() => {\r\n            (<any>window).plugins.CipherlabRS30CordovaPlugin.setReceiveScanCallback((data) => {\r\n              this.log.debug(\"Cipherlab Callback called scanned = [\" + data + \"]\");\r\n              this.barcodes.push(data);\r\n            });\r\n          });\r\n        }\r\n        if (this.usePM80) {\r\n          //(<any>window).plugins.pm80scanner.scan( function success (result, metadata) {\r\n          cordova.plugins.pm80scanner.set( this.pm80SuccessCallback, this.pm80ErrorCallback);\r\n\t\t\t\t\tthis.log.debug(\"PM80: callbacks are set\");\r\n        }\r\n        window.onbeforeunload = () => {\r\n          this.log.debug('BarcodeCtrl: onBeforeUnload');\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\tpm80SuccessCallback = (result, metadata) => {\r\n\t\t// result has successful scan as text, metadata has result and barcode type\r\n\t\tthis.log.debug(\"PM80: callback scanned = [\" + result + \"], metadata:\" + JSON.stringify(metadata));\r\n\t\tthis.barcodes.push(result);\r\n\t\tthis.cd.detectChanges();\r\n\t}\r\n\r\n\tpm80ErrorCallback = (error) => {\r\n\t\tthis.log.error(\"PM80: error:\" + error);\r\n\t}\r\n\r\n\ttrackByFn(index, barcode) {\r\n\t\treturn index;\r\n\t}\r\n        \r\n  ionViewWillEnter() {\r\n\r\n    //set the tab string in shared-service\r\n    this.sharedService.tab = \"Scan/Barcode\";\r\n\r\n    this.log.info(\"In the Scan/Barcode Tab.\");\r\n  }\r\n\r\n\r\n  strncmp = (str1, str2, n) => {\r\n    str1 = str1.substring(0, n);\r\n    str2 = str2.substring(0, n);\r\n    return ((str1 == str2) ? 0 :\r\n      ((str1 > str2) ? 1 : -1));\r\n  }\r\n\r\n  /*========================================*/\r\n  /*        CAMERA SCAN                    */\r\n  /*========================================*/\r\n  scan = () => {\r\n    if (this.platformReady.isPlatformReady()) {\r\n      this.useCamera = true;\r\n      this.barcodeScanner.scan().then((barcodeData) => {\r\n        // Success! Barcode data is here\r\n        // Returns object e.g.: {text: \"053329109558\", format: \"UPC_A\", cancelled: false}\r\n        this.barcodes.push(barcodeData.text);\r\n        this.log.debug('CAMERA scanned OK: barcodeData:' + barcodeData);\r\n      }, (error) => {\r\n        // An error occurred\r\n        this.log.debug('CAMERA BAD scan : error:' + error);\r\n      })\r\n    }\r\n    else {\r\n      var ltitle = 'ERROR';\r\n      var lmes = 'CAMERA: cordova NOT ready';\r\n      let alert = this.alertCtrl.create({\r\n        title: ltitle,\r\n        subTitle: lmes,\r\n        buttons: ['Ok'],\r\n        enableBackdropDismiss: false\r\n      });\r\n      alert.present();\r\n    };\r\n  }//Camera Scan ends\r\n\r\n\r\n\r\n  /*========================================*/\r\n  /*        SCAN SESSION CANCEL   */\r\n  /*========================================*/\r\n  scanCancel = () => {\r\n    var confirmPopup = this.alertCtrl.create({\r\n      title: 'CANCEL Scan Session',\r\n      subTitle: 'Are you sure you want to CANCEL this scan session (You will lose all data scanned)?',\r\n      buttons: [\r\n        {\r\n          text: 'Yes',\r\n          handler: () => {\r\n            this.log.debug('User has Cancelled the scan session');\r\n            this.barcodes = [];\r\n            return;\r\n          }\r\n        },\r\n        {\r\n          text: 'No',\r\n          handler: () => {\r\n            this.log.debug('User has CANCELLED out of a Scan session CANCEL');\r\n\r\n          }\r\n        }],\r\n      enableBackdropDismiss: false\r\n    });\r\n    confirmPopup.present();\r\n  }//scanCancel() ends here\r\n\r\n  openSignatureModal = () => {\r\n    var lparams = { metadata: { barcodeSignOff: true } };\r\n    let modal = this.modalController.create('SignaturePage', lparams);\r\n    modal.onDidDismiss(result => {\r\n      if (typeof result !== 'undefined') {\r\n        var podname = result.podname;\r\n        var signature = result.signature;\r\n        this.confirmscanSubmit(signature, podname);\r\n      }\r\n    });\r\n    modal.present();\r\n  }\r\n\r\n\r\n\r\n  scanSubmit = function () {\r\n    if (this.barcodes.length == 0) {\r\n      return;\r\n    }\r\n\r\n    let subconfirmPopup = this.alertCtrl.create({\r\n      title: 'Scan Session Confirm',\r\n      message: 'Are you sure you want to submit your Scan session to the database ?',\r\n      buttons: [\r\n        {\r\n          text: 'Submit',\r\n          handler: () => {\r\n            if (this.my_is_scan_on == false) /// SCAN OFF\r\n            {\r\n              this.openSignatureModal();\r\n            } else {\r\n              this.confirmscanSubmit();\r\n            }\r\n          }\r\n        },\r\n        {\r\n          text: 'Cancel',\r\n          handler: () => {\r\n            this.log.debug('User has CANCELLED out of a Scan session SUBMIT Doing nothing');\r\n            return;\r\n          }\r\n        }\r\n      ],\r\n      enableBackdropDismiss: false\r\n    });\r\n    subconfirmPopup.present();\r\n\r\n  }//scanSubmit() ends\r\n\r\n\r\n  /*========================================*/\r\n  /*       SCAN SESSION SUBMIT   */\r\n  /*========================================*/\r\n  confirmscanSubmit = function (signat, podname) {\r\n    var save_status = 'FAILED';\r\n    var _filter =\r\n    {\r\n      \"where\": { and: [{ \"mobjobDriver\": this.pdaParams.getDriverId() }, { \"mobjobStatus\": { \"neq\": \"DL\" } }] },\r\n      \"order\": ['mobjobNumber ASC', 'mobjobLegNumber ASC']\r\n    };\r\n\r\n    var filter = Object.assign({}, _filter);\r\n    this.Job.find(filter, (err, jobs) => {\r\n      this.doSubmitWork(jobs, signat, podname);\r\n    });\r\n  }//confirmscanSubmit() ends here\r\n\r\n  doSubmitWork = function (jobs, signat, podname) {\r\n    //console.log(\"doSubmitWork fired!!\");\r\n    var syncRequired = 0;\r\n    var foundJob = false;\r\n    var foundIdx = 0;\r\n    var foundJobNum;\r\n    var foundJobDate;\r\n    var fjobarr = new Array();\r\n    var matchedJobsPieces = 0;\r\n    // A confirm dialog\r\n    var len = this.barcodes.length;\r\n    this.log.debug(\"Searching on \" + len + \" Barcodes across all Jobs\");\r\n    for (var i = 0; i < len; i++) {\r\n      //Set up a unique number\r\n      var d = new Date();\r\n      var uniqId = d.getTime();\r\n      var bchSession = new this.LocalBarcodeHist();\r\n      bchSession.bchSeq = uniqId % 1000000;\r\n      bchSession.bchDriver = this.pdaParams.getDriverId();\r\n      bchSession.bchBarcode = this.barcodes[i];\r\n      this.bcode = bchSession.bchBarcode;\r\n      this.log.debug(\"Looking for BCODE [\" + this.bcode + \"] across all Jobs\");\r\n      bchSession.bchTimestamp = d.toISOString();\r\n      var oset = d.getTimezoneOffset();\r\n      bchSession.bchTimestamp += (oset * -1) * 60 * 1000;\r\n      //Always Zero for a Scan on \r\n      bchSession.bchTimestamp = new Date().toISOString();\r\n      if (this.my_is_scan_on) {\r\n        bchSession.bchJobno = 0;\r\n        bchSession.bchJobdate = new Date();\r\n        bchSession.bchEvent = 'SCAN ON';\r\n      }\r\n      else {\r\n        //We need to get these from a Job\r\n        bchSession.bchEvent = 'SCAN OFF';\r\n        /****************************************************************/\r\n        /* Go Thru the list of jobs that are Picked up and compare their */\r\n        /* connote number against the barcode and when matches thats the*/\r\n        /* Job to finish off                                            */\r\n        /****************************************************************/\r\n        this.log.debug(\"Looking across \" + jobs.length + \" JOBS\");\r\n        for (var x = 0; x < jobs.length; x++) {\r\n          var job = jobs[x];\r\n          var dstring;\r\n          var myconnote_num;\r\n          //Only do this for the first leg as the others are not usefull\r\n          //console.log(\"mobjobLegNumber is:\" + job.mobjobLegNumber);\r\n          if (job.mobjobLegNumber == 0) {\r\n            var jn = job.mobjobNumber;\r\n            if (this.myBcodeIsjobNum) {\r\n              //==== DATE HANDLING to get the connotenum to something like\r\n              //============= 1160615002020 ===========================\r\n              var jobBookDay = new Date(job.mobjobBookingDay);\r\n              var fy = jobBookDay.getFullYear() % 100;\r\n              var dm = jobBookDay.getDate() * 1;\r\n              var mi = jobBookDay.getMonth() + 1;\r\n              //The  leading zero is due to the barcode that gets generate needing to be an even number\r\n              dstring = \"01\" + fy + ((mi < 10) ? (\"0\" + mi) : mi) + ((dm < 10) ? (\"0\" + dm) : dm);\r\n              jn = (jn < 100000 && jn > 9999) ? (\"0\" + jn) : jn;\r\n              jn = (jn < 10000) ? (\"00\" + jn) : jn;\r\n              myconnote_num = dstring + jn;\r\n            }\r\n            else {\r\n              //Connote num stored here\r\n              myconnote_num = job.mobjobAddrExtras;\r\n            }\r\n            bchSession.bchEventSubtype = 'N/A';\r\n\r\n            this.log.debug(\"Before checking Barcode against Job: \" + job.mobjobNumber + \" JobsConnoteNumber: \" + myconnote_num + ' Barcode: ' + this.bcode);\r\n            //Only Compare the length of myconnote_num eg so if Bcode was WXLGHHH01 and myconn is WXLGHHH then OK\r\n            if (myconnote_num.length > 1 && this.strncmp(myconnote_num, this.bcode, myconnote_num.length) == 0) {\r\n              this.log.debug('Scan OFF FOUND Barcode on Job:' + jn + \" On Date \" + myconnote_num);\r\n              foundJob = true;\r\n              //Should store the Pickup Leg of the Found Job\r\n              foundIdx = x;\r\n              foundJobNum = job.mobjobNumber;\r\n              foundJobDate = job.mobjobBookingDay;\r\n              matchedJobsPieces += job.mobjobJobPieces;\r\n              this.JobsPieces = matchedJobsPieces;\r\n              this.log.debug('Scan OFF recording JOb Index ' + foundIdx + 'Pieces now = ' + matchedJobsPieces);\r\n\r\n              fjobarr.push(foundIdx);\r\n              break; // No need to keep looking we have found the job for this barcode   \r\n            }\r\n          }\r\n        }\r\n        if (foundJob == false) {\r\n          bchSession.bchEventSubtype = 'ORPHAN';\r\n        }\r\n      }//SCAN OFF ELSE ENDS\r\n      this.log.info(\"About to save Barcode Hist Session for barcode \" + JSON.stringify(bchSession));\r\n      bchSession.save();\r\n      syncRequired++;\r\n    }\r\n\r\n    //Go through Jobs and attach signat and PODNAME where required\r\n    if (this.my_is_scan_on == false)  //ONLY FOR SCAN OFF\r\n    {\r\n      this.log.debug('Doing Job update for SCAN OFF Job foundJob = ' + foundJob);\r\n      if (foundJob) {\r\n        var fjobnum = 0;\r\n        //The list can array may have matched the same job number multiple times\r\n        var uniquearr = fjobarr.filter(function (item, i, ar) { return ar.indexOf(item) === i; });\r\n        //Go Thru the found Job Array\r\n        for (var li = 0; li < uniquearr.length; li++) {\r\n          var lfidx = uniquearr[li];\r\n          for (var x = 0; x < 2; x++) {\r\n            this.log.debug('In Job loop: x = ' + x);\r\n            var job = jobs[lfidx + x];\r\n            if (x == 0)\r\n              fjobnum = job.mobjobNumber;\r\n            this.log.debug('In Job loop: x = ' + x + ' jobnum = ' + job.mobjobNumber);\r\n            if (x == 1) {\r\n              if (fjobnum != job.mobjobNumber) {\r\n                this.log.debug('!!!!!!!!! JOb Number Mismatch Pup JOb ' + fjobnum + ' Del job ' + job.mobjobNumber);\r\n              }\r\n              else {\r\n                this.log.debug('In Job loop: x + 1 = ' + x + ' jobnum = ' + job.mobjobNumber);\r\n                job.mobjobSignat = signat || \"\";\r\n                if (podname) {\r\n                  job.mobjobPodName = podname;\r\n                  job.mobjobPodTime = new Date().toISOString();\r\n                }\r\n              }\r\n            }\r\n            job.mobjobStatus = 'DL';\r\n            job.save();     // save leg           \r\n          }\r\n        }\r\n      }\r\n      else {\r\n        var ltitle = 'ERROR';\r\n        var lmes = 'The Scan Off could not find a job that matched your barcodes';\r\n        let alert = this.alertCtrl.create({\r\n          title: ltitle,\r\n          subTitle: lmes,\r\n          buttons: ['Ok'],\r\n          enableBackdropDismiss: false\r\n        });\r\n        alert.present();\r\n      }\r\n    }//my_is_scan_on check for false ends here\r\n    this.finishSubmit(foundJob, syncRequired);\r\n  }//End of doSubmitWork()\r\n\r\n\r\n  finishSubmit = function (foundJob, syncRequired) {\r\n    if (foundJob == false) {\r\n      this.log.info(\"Been through all barcodes and Jobs and NOT FOUND CONNOTE ON ANY JOB \");\r\n    }\r\n\r\n    if (syncRequired) {\r\n      this.barcodeReplicationService.barcode_sync();\r\n      //this.barcodeService.setSyncRequired(true);\r\n      this.barcodes = [];\r\n    }\r\n\r\n    if (this.platformReady.isPlatformReady()) {\r\n      if (this.useCipherlab) {\r\n        (<any>window).plugins.CipherlabRS30CordovaPlugin.destroy(function () { });\r\n      }\r\n\t\t\tif (this.usePM80) {\r\n\t\t\t\tcordova.plugins.pm80scanner.cancel();\t\t\t// Not sure if required \r\n\t\t\t}\r\n    }\r\n    //this.app.getRootNav().setRoot(TabsPage);\r\n    //this.navCtrl.popToRoot();\r\n    this.t.select(0);\r\n\r\n  }//finishSubmit() ends here\r\n\r\n  arrayRemove = (value) => {\r\n    this.barcodes = this.barcodes.filter((ele) => {\r\n      return ele != value;\r\n    });\r\n  }\r\n\r\n  indexRemove = (index) => {\r\n\t\tthis.barcodes.splice(index, 1);\r\n\t\tthis.cd.detectChanges();\r\n  }\r\n\r\n  customTrackBy(index: number, obj: any): any {\r\n    return index;\r\n  }\r\n\r\n  submitBarInput = () => {\r\n    if (this.barcodetemp.length > 0 && this.barcodetemp.trim() != '') {\r\n      this.barcodes.push(this.barcodetemp);\r\n      this.barcodetemp = \"\";\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/barcode/barcode.ts"],"sourceRoot":""}