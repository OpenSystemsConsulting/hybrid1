<ion-content direction="xy" ng-class="{ 'overflow-scroll': (desktopBrowserScrolling == true) }" padding="true">
<h1>Local Change List</h1>
<p>
  A list of all changes made to models in local storage.
</p>
<strong ng-if="changes.length === 0">
  No local changes have been made.
</strong>
<table ng-if="changes.length">
  <tr>
    <th>Model ID</th>
    <th>Type</th>
    <th>Checkpoint</th>
    <th>Revision</th>
    <th>Prev Revision</th>
  </tr>
  <tr ng-repeat="change in changes">
    <td>{{change.modelId}}</td>
    <td>{{change.type()}}</td>
    <td>{{change.checkpoint}}</td>
    <td>{{change.rev}}</td>
    <td>{{change.prev}}</td>
  </tr>
</table>

<h1>Local to Server Deltas</h1>
<p>
  Below is list of changes required to replicate local data to the server.
</p>
<strong ng-if="diff.deltas.length === 0">No changes required to replicate the local data to the server.</strong>
<table ng-if="diff.deltas.length">
  <tr>
    <th>Model ID</th>
    <th>Revision</th>
    <th>Prev Revision</th>
  </tr>
  <tr ng-repeat="delta in diff.deltas">
    <td>{{delta.modelId}}</td>
    <td>{{delta.rev}}</td>
    <td>{{delta.prev}}</td>
  </tr>
</table>

<h1>Local Storage Data</h1>
<strong ng-if="jobs.length === 0">
  There is no data in local storage.
</strong>
<table ng-if="jobs.length">
  <tr>
    <th>Model ID</th>
    <th>Sequence</th>
    <th>Client</th>
    <th>Status</th>
    <th>Driver</th>
  </tr>
  <tr ng-repeat="job in jobs">
    <td>{{job.getId()}}</td>
    <td>{{job.mobjobSeq}}</td>
    <td>{{job.mobjobClientCode}}</td>
    <td>{{job.mobjobStatus}}</td>
    <td>{{job.mobjobDriver}}</td>
  </tr>
</table>

<h1>Local to Server Conflicts</h1>
<p>
  Below is list of changes that cannot be replicated to the server.
</p>
<strong ng-if="diff.conflicts.length === 0">No conflicts</strong>
<table ng-if="diff.conflicts.length">
  <tr>
    <th>Model ID</th>
    <th>Checkpoint</th>
    <th>Revision</th>
    <th>Prev Revision</th>
  </tr>
  <tr ng-repeat="conflict in diff.conflicts">
    <td>{{conflict.modelId}}</td>
    <td>{{conflict.checkpoint}}</td>
    <td>{{conflict.rev}}</td>
    <td>{{conflict.prev}}</td>
  </tr>
</table>

<footer class="debug">
	<button ng-click="sync()" ng-class="{deltas: needSync}">Sync</button>
	<button ng-click="connect()">Connect</button>
	<button ng-click="disconnect()">Disconnect</button>
	<button ng-click="reload()">Reload jobs</button>
	<button ng-click="logLocalStorage()">Log local storage</button>
	<button ng-click="clearLocalStorage()">Clear local storage</button>
	<!-- <a href="/debug" target="_blank">Debug</a> -->
	<strong> connected: {{ connected() }} </span>
</footer>

</ion-content>
